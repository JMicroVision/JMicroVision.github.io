<!DOCTYPE HTML>
<html>
<!-- InstanceBegin template="/Templates/page.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<!-- InstanceEndEditable -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Adobe RoboHelp 2017" />
<!-- InstanceBeginEditable name="doctitle" -->
<title>Watershed</title>
<!-- InstanceBeginEditable name="head" -->
<!-- InstanceEndEditable -->
<link href="../contenu.css" rel="stylesheet" type="text/css" />

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-YB6MK3XMZG"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-YB6MK3XMZG');
</script>
<script type="text/javascript" language="JavaScript">
//<![CDATA[
function reDo() {
  if (innerWidth != origWidth || innerHeight != origHeight)
     location.reload();
}
if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
	origWidth = innerWidth;
	origHeight = innerHeight;
	onresize = reDo;
}
onerror = null; 
//]]>
</script>
<style type="text/css">
<!--
div.WebHelpPopupMenu { position:absolute;
left:0px;
top:0px;
z-index:4;
visibility:hidden; }
-->
</style>
<script type="text/javascript" language="javascript1.2" src="../whmsg.js" charset="utf-8"></script>
<script type="text/javascript" language="javascript" src="../whver.js" charset="utf-8"></script>
<script type="text/javascript" language="javascript1.2" src="../whutils.js" charset="utf-8"></script>
<script type="text/javascript" language="javascript1.2" src="../whproxy.js" charset="utf-8"></script>
<script type="text/javascript" language="javascript1.2" src="../whlang.js" charset="utf-8"></script>
<script type="text/javascript" language="javascript1.2" src="../whtopic.js" charset="utf-8"></script>

</head>

<body><script type="text/javascript" language="javascript1.2">//<![CDATA[
<!--
if (window.gbWhTopic)
{
	var strUrl = document.location.href;
	var bc = 0;
	var n = strUrl.toLowerCase().indexOf("bc-");
	if(n != -1)
	{
		document.location.replace(strUrl.substring(0, n));
		bc = strUrl.substring(n+3);
	}

	if (window.addTocInfo)
	{
	addTocInfo("Image Operations\nWatershed");
addButton("show",BTN_TEXT,"Show","","","","",0,0,"","","");

	}
	if (window.writeBtnStyle)
		writeBtnStyle();

	if (window.writeIntopicBar)
		writeIntopicBar(1);

	
	document.write("<p style=\"text-align:right\"> ");
AddMasterBreadcrumbs("../JMicroVision.htm", "", ">", "Accueil", "../introduction/welcome.htm");
document.write("<a href=\"segmentationOp.htm\">Image Operations<\/a> > Watershed<\/p>");

}
else
	if (window.gbIE4)
		document.location.reload();

onLoadHandler = function()
{
  if (window.setRelStartPage)
	{
	setTimeout("setRelStartPage('../JMicroVision.htm');", 1)

    setTimeout("UpdateBreadCrumbsMarker();", 1);
	}
}

if (window.addEventListener){  
	window.addEventListener('load', onLoadHandler, false);   
} else if (window.attachEvent){  
	window.attachEvent('onload', onLoadHandler);  
}

function onSetStartPage()
{
  autoSync(1);
  sendSyncInfo();
  sendAveInfoOut();
}
//-->
//]]></script>
<script type="text/javascript" src="../ehlpdhtm.js" language="JavaScript1.2"></script>

<table cellspacing="0" width="99%">
	<tr>
		<td style="vertical-align: middle; text-align: left; padding-left: 5px; 
			 padding-top: 5px; padding-right: 5px; padding-bottom: 5px;" 
			 bgcolor="#E4A54E"><h1><!-- InstanceBeginEditable name="titre" -->
         Watershed <!-- InstanceEndEditable --></h1></td>
		<td style="vertical-align: middle; text-align: right; padding-left: 5px; 
			 padding-top: 5px; padding-right: 5px; padding-bottom: 5px;" 
			 bgcolor="#E4A54E"><img src="../images/logForWeb.gif" alt="" 
									 width="71" height="27" border="0" /></td>
	</tr>
</table>
<!-- InstanceBeginEditable name="texte" -->
  <table width="99%">
	<tr>
		<td style="vertical-align: top; text-align: left; padding-left: 5px; 
			 padding-top: 5px; padding-right: 5px; padding-bottom: 5px;"><p>Image 
		 segmentation is the process of isolating objects in the image 
		 from the background. Separating touching objects in an image is 
		 really a difficult task. The watershed transform is often applied 
		 to this problem.&#160;Another method available in JMicroVision 
		 is <strong><a href="object_extraction.htm#separation">Object Separation</a></strong>. 
		 </p>
		<p>The watershed from markers can be intuitively described as the 
		 flooding simulation, where the image is treat as a surface (light 
		 pixels are high and dark pixels are low). This surface is submerged 
		 slowly in water. From each of the holes, the flooding water is 
		 painted with the color of the marker. At any time that different 
		 colored water coming from different holes meet, a dam is built 
		 to avoid their mixing. This mechanism continues progressively 
		 until the brightest pixel is reached. The final dams are the watershed 
		 lines and the colored water is the segmented regions.</p>
		<p class="note"><span class="note"><img src="../images/pencil.gif" 
												 alt="" width="15" height="19" 
												 border="0" />&#160;<strong>Note:</strong> 
		 To obtain better result, the source image is automatically transformed 
		 into Sobel edge image (see <a href="gradientFilterOp.htm"><strong>gradient 
		 filtering</strong></a>). The gradient tends to be high at the 
		 borders of the objects and low inside the objects.</span></p>
		<p>This implementation always uses markers to control the watershed 
		 segmentation. <span style="font-weight: normal;">The marker-controlled 
		 method leads to segmentation results in which one object (segmented 
		 region) corresponds to only one marker.</span> </p></td>
		<td style="vertical-align: top; text-align: left; padding-left: 5px; 
			 padding-top: 5px; padding-right: 5px; padding-bottom: 5px;"><p><img 
		 src="../images/watershed.gif" alt="" width="199" height="305" 
		 border="0" /></p></td>
	</tr>
</table>
<p class="note"><img src="../images/pencil.gif" alt="" width="15" height="19" 
					 border="0" />&#160;<strong>Note:</strong> The watershed 
 process requires to handle the whole image in memory, thus it can be applied 
 on very high-definition images only if the computer has enough memory.</p>
<h3>Source Image</h3>
<p><strong>Image</strong>: Select an image as input for watershed.</p>
<p><strong>Median filter (pre-processing)</strong>: Checking this box applies 
 to the input image a median filter (size: 7x7), which reduces noise while 
 it preserves the position of borders.</p>
<h3>Markers</h3>
<p>Each marker results in one region. When the markers selection is an 
 image, each region <span id="BABID_Results"><span>characterize</span></span>d 
 by a color or a gray level is considered as a marker, except black region 
 that represents the background. There are different ways to obtain an 
 image of markers. The most common one is the <strong>ultimate eroded points 
 </strong>image. However, a <span class="BAB_CPTermStyle">combination</span> 
 of morphological operations can produce an image of markers.</p>
<ul style="list-style-image: url('../images/blueListBull.gif');">
	<li><strong>Image</strong>: Select an image where each non-black region 
	 <span class="note">(pixels in 8 <a href="BinaryOp.htm">pixel connectivity</a>)</span> 
	 represents a marker.<br />
	<img src="../images/pencil.gif" alt="" width="15" height="19" border="0" />&#160;<strong>Note:</strong> 
	 It is recommended to use grayscale image as markers, because during 
	 the process, the color image is converted to a grayscale image. Therefore, 
	 different colors can be transformed into the same gray level.</li>
	<li><strong>Visible markers</strong>: Use the drawn <a href="image_factory.htm#marker"><strong>markers</strong></a> 
	 that are visible.</li>
	<li><strong>Ultimate eroded points (only binary)</strong>: This mode 
	 requires a binary image as source and will produce the watershed lines 
	 image. The ultimate eroded points operation can be divided in three 
	 steps. Firstly, the <a href="BinaryOp.htm"><strong>Euclidian Distance 
	 Map</strong></a> image is computed. Secondly, the latter image is 
	 <span class="BAB_CPTermStyle">successively</span> eroded until it 
	 remains only the local maximum of brightness (the local center of 
	 white regions). And thirdly, the image is smoothed by a Gaussian filter 
	 (5x5). Finally, to obtain the object separation, a <span class="note"><a 
	 href="logicOp.htm">logical <strong>And</strong></a></span> operation 
	 must be performed between the watershed lines image and the source 
	 image. This separation method is suitable for convex and relatively 
	 round particles.</li>
</ul>
<p><strong>Merge the markers of the same class</strong>: This option has 
 an effect only if the <strong>Display a line of separation</strong> button 
 is checked. It removes the boundary lines of regions, which belongs to 
 the same class. Do not check this button <span class="note">if all the 
 markers have the same color.</span></p>
<p class="note"><img src="../images/pencil.gif" alt="" width="15" height="19" 
					 border="0" />&#160;<strong>Note:</strong> When <strong>Ultimate 
 eroded points</strong> is selected, this option has no effect.</p>
<h3>Options</h3>
<p><strong>Pixel connectivity</strong>: Define the <a href="BinaryOp.htm">pixel 
 connectivity</a> when the algorithm floods the regions.</p>
<p class="note"><img src="../images/pencil.gif" alt="" width="15" height="19" 
					 border="0" />&#160;<strong>Note:</strong> When 8 is 
 selected, the black boundary line is larger (pixels in 4 pixel connectivity). 
 This enables to extract each region as an object (in <a href="object_extraction.htm"><strong>Object 
 Extraction</strong></a>), if 4 is selected, the connected 
 regions will be merged into one object. </p>
<p><strong>Display a line of separation</strong>: Display the boundary 
 line of segmented regions.</p>
<p class="note">&#160;<img src="../images/pencil.gif" alt="" width="15" 
							 height="19" border="0" />&#160;<strong>Note:</strong> 
 This option must be activated to distinguish the boundary of region, especially<br />
when all the markers have an identical color or with binary images.</p>
<p><img src="../images/hg_see.gif" alt="" width="18" height="13" border="0" /><b>See 
 also:</b></p>
<dl>
	<dd><a href="image_factory.htm">Image Factory</a></dd>
</dl>
<p>&#160;</p>
<!-- InstanceEndEditable --><!-- InstanceEnd -->
<script type="text/javascript" language="javascript1.2">//<![CDATA[
<!--
if (window.writeIntopicBar)
	writeIntopicBar(0);


highlightSearch();
//-->
//]]></script>
</body>
</html>
